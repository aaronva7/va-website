{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport '../components/TestimonialPanel.css';\nimport fetch from 'isomorphic-unfetch';\n\nfunction Testimonials(props) {\n  //default testomonials\n  var _useState = useState([]),\n      testimonials = _useState[0],\n      setTestimonials = _useState[1]; //default page\n\n\n  var _useState2 = useState(\"0\"),\n      offset = _useState2[0],\n      setOffset = _useState2[1];\n\n  var _useState3 = useState(\"0\"),\n      nextOffset = _useState3[0],\n      setNextOffset = _useState3[1];\n\n  var location = null; // Similar to componentDidMount and componentDidUpdate:\n\n  useEffect(function () {\n    // get airtable data\n    fetch(\"https://api.airtable.com/v0/apppt70pO3svlPGVH/Imported%20table?api_key=keyeWGXi14Rtk0OPQ&pageSize=\".concat(6, \"&offset=\", offset)).then(function (res) {\n      if (!res.ok) {\n        throw new Error(res.status);\n      }\n\n      return res.json();\n    }).then(function (data) {\n      setTestimonials([].concat(_toConsumableArray(testimonials), _toConsumableArray(data.records.map(function (record) {\n        return {\n          rating: record.fields.RatingPercentage * 5,\n          comment: record.fields.Comment,\n          name: record.fields.Tenant,\n          location: record.fields.State\n        };\n      }))));\n      setNextOffset(data.offset);\n    })[\"catch\"](function (error) {\n      return console.log({\n        error: error\n      });\n    });\n  }, [offset]);\n\n  if (location != null) {\n    alert('1');\n  }\n\n  function loadNextPage() {\n    setOffset(nextOffset);\n  }\n\n  return __jsx(\"section\", null, __jsx(Container, {\n    fluid: true,\n    className: \"n-product-spacer\"\n  }, __jsx(Row, null, __jsx(Col, {\n    xs: 12\n  }, __jsx(\"div\", {\n    className: \"n-container-mw\"\n  }, __jsx(\"div\", {\n    className: \"n-pu-grid\"\n  }, testimonials.map(function (testimonial, index) {\n    return __jsx(\"div\", {\n      key: index\n    }, __jsx(\"p\", {\n      className: \"lh-normal\"\n    }, __jsx(\"i\", {\n      className: \"fas fa-quote-left\"\n    })), __jsx(Stars, {\n      count: testimonial.rating\n    }), __jsx(\"p\", {\n      className: \"lh-normal text-lgrey\"\n    }, testimonial.comment), __jsx(\"p\", {\n      className: \"lh-normal text-lgrey\"\n    }, testimonial.name, \" \", testimonial.location), __jsx(\"p\", {\n      className: \"lh-normal text-lgrey\"\n    }, \"Tenant\"));\n  })), __jsx(\"div\", {\n    className: \"review-container text-center\"\n  }, __jsx(\"button\", {\n    className: \"btn btn-va-fix btn-big f-light smooth-animation d-inline-flex align-items-center\",\n    onClick: loadNextPage\n  }, \"See more user stories \", __jsx(\"i\", {\n    className: \"fal fa-long-arrow-right ml-2 smooth-animation btn-moveRight\"\n  }))))))));\n}\n\nfunction Stars(props) {\n  var stars = [];\n\n  for (var i = 0; i < props.count; i++) {\n    stars.push(i);\n  }\n\n  return __jsx(\"p\", {\n    className: \"lh-normal text-dgrey\"\n  }, stars.map(function (s) {\n    return __jsx(\"i\", {\n      key: s,\n      className: \"fas fa-star\"\n    });\n  }));\n}\n\nexport default Testimonials;","map":null,"metadata":{},"sourceType":"module"}