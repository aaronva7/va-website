{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport '../components/TestimonialPanel.css';\nimport fetch from 'isomorphic-unfetch';\n\nfunction Testimonials(props) {\n  //default testomonials\n  const {\n    0: testimonials,\n    1: setTestimonials\n  } = useState([]); //default page\n\n  const {\n    0: offset,\n    1: setOffset\n  } = useState(\"0\");\n  const {\n    0: nextOffset,\n    1: setNextOffset\n  } = useState(\"0\");\n  const location = null; // Similar to componentDidMount and componentDidUpdate:\n\n  useEffect(() => {\n    // get airtable data\n    fetch(`https://api.airtable.com/v0/apppt70pO3svlPGVH/Imported%20table?api_key=keyeWGXi14Rtk0OPQ&pageSize=${6}&offset=${offset}`).then(res => {\n      if (!res.ok) {\n        throw new Error(res.status);\n      }\n\n      return res.json();\n    }).then(data => {\n      setTestimonials([...testimonials, ...data.records.map(record => ({\n        rating: record.fields.RatingPercentage * 5,\n        comment: record.fields.Comment,\n        name: record.fields.Tenant,\n        location: record.fields.State\n      }))]);\n      setNextOffset(data.offset);\n    }).catch(error => console.log({\n      error\n    }));\n  }, [offset]);\n\n  if (location != null) {\n    alert('1');\n  }\n\n  function loadNextPage() {\n    setOffset(nextOffset);\n  }\n\n  return __jsx(\"section\", null, __jsx(Container, {\n    fluid: true,\n    className: \"n-product-spacer\"\n  }, __jsx(Row, null, __jsx(Col, {\n    xs: 12\n  }, __jsx(\"div\", {\n    className: \"n-container-mw\"\n  }, __jsx(\"div\", {\n    className: \"n-pu-grid\"\n  }, testimonials.map((testimonial, index) => __jsx(\"div\", {\n    key: index\n  }, __jsx(\"p\", {\n    className: \"lh-normal\"\n  }, __jsx(\"i\", {\n    className: \"fas fa-quote-left\"\n  })), __jsx(Stars, {\n    count: testimonial.rating\n  }), __jsx(\"p\", {\n    className: \"lh-normal text-lgrey\"\n  }, testimonial.comment), __jsx(\"p\", {\n    className: \"lh-normal text-lgrey\"\n  }, testimonial.name, \" \", testimonial.location), __jsx(\"p\", {\n    className: \"lh-normal text-lgrey\"\n  }, \"Tenant\")))), __jsx(\"div\", {\n    className: \"review-container text-center\"\n  }, __jsx(\"button\", {\n    className: \"btn btn-va-fix btn-big f-light smooth-animation d-inline-flex align-items-center\",\n    onClick: loadNextPage\n  }, \"See more user stories \", __jsx(\"i\", {\n    className: \"fal fa-long-arrow-right ml-2 smooth-animation btn-moveRight\"\n  }))))))));\n}\n\nfunction Stars(props) {\n  const stars = [];\n\n  for (var i = 0; i < props.count; i++) {\n    stars.push(i);\n  }\n\n  return __jsx(\"p\", {\n    className: \"lh-normal text-dgrey\"\n  }, stars.map(s => __jsx(\"i\", {\n    key: s,\n    className: \"fas fa-star\"\n  })));\n}\n\nexport default Testimonials;","map":null,"metadata":{},"sourceType":"module"}